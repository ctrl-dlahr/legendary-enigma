language: python
# current work around for python 3.7
matrix:
  include:
    - python: 3.7
      dist: xenial
      sudo: true
env:
  - DJANGO_VERSION=2.1.5
before_install:
  - psql -c "CREATE DATABASE db;" -U postgres
  - psql -c "CREATE USER postgres WITH PASSWORD 'postgres';" -U postgres
install:
  - pip install -q Django==$DJANGO_VERSION
  - pip install -r requirements.txt
script: python3 manage.py test
branches:
  only:
    - master
services: postgresql